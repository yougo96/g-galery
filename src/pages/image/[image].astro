---
import Layout from '../../layouts/Layout.astro';

const { image } = Astro.params;

const response = await fetch(`https://photoslibrary.googleapis.com/v1/mediaItems/${image}`, {
	method: 'GET',
	headers: {
		'Content-Type': 'application/json',
		Authorization: `Bearer ${import.meta.env.AccessToken}`,
	}
});
const datas = await response.json();
// console.log(datas);
---

<Layout title="g-galery>image">
    <main style="grid-area: main;">
        <a href="/" style="display: block; width: 100%; text-align: center; text-decoration: none; color: var(--color-main);">â¬†</a>
        <hr>
        <h3>{image}</h3>
        {datas.id ?
            (
                <img src=`${datas.baseUrl}=w2048-h1024` alt="Cover">
                <pre>{JSON.stringify(datas, null, 2)}</pre>
            ) : 
            (<span class="error">'No data'</span>)
        }
        
    </main>
</Layout>

<style>
    img {
        width: 100%;
    }
</style>